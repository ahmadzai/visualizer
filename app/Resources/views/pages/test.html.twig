{% extends 'base.html.twig' %}

{% block body %}

    <script src="https://code.highcharts.com/maps/highmaps.js"></script>
    <script src="{{ asset('charts/modules/exporting.js') }}"></script>
    <script src="{{ asset('charts/modules/grouped-categories.js') }}"></script>
    <div class="row">
        <div class="col-md-6">
            <div class="box box-primary">
                <div class="chart-filter">
                    <span><a href="#"><i class="fa fa-filter"></i></a></span>
                    <div class="filter-content">
                        <a class="campaign-type" href="#" title="NID" data-url="vac_child_10camp">NID</a>
                        <a class="campaign-type" href="#" title="SNID" data-url="vac_child_10camp">SNID</a>
                        <a class="campaign-type" href="#" title="LPD" data-url="vac_child_10camp">LPD</a>
                        <a class="campaign-type" href="#" title="LPD" data-url="vac_child_10camp">Reset</a>
                    </div>
                </div>
                <span class="filter-loading loading vac_child_10camp" title="Applying filter"><img src='{{ asset('ajax-loader-arrow.gif')}}' /></span>
                <div class="box-body">
                    <div id="chart-vac_child_10camp" style="min-width: 400px; min-height: 600px; max-height: 100%"></div>
                </div>
                <!-- /.box-body -->
            </div>
        </div>

    </div>


{% endblock %}

{% block head_javascripts %}
    <script src="{{ asset('template/bower_components/jquery/dist/jquery.min.js')}}"></script>
    <!-- Bootstrap 3.3.7 -->
    <script src="{{ asset('template/bower_components/bootstrap/dist/js/bootstrap.min.js') }}"></script>

    <!-- AdminLTE App -->

    <script src="{{ asset('bundles/fosjsrouting/js/router.js') }}"></script>
    <script src="{{ path('fos_js_routing_js', {'callback': 'fos.Router.setData'}) }}"></script>

{% endblock %}
{% block javascripts %}
    <script src="{{ asset('custom_js_css/charts-wrapper.js') }}"></script>
    <script>
        $(document).ready(function () {

            // ========================= General Configuration for charts =================
            {#const config = new Array();#}
            {#config['vac_child_10camp'] = {'title':'No of vaccinated children', 'color':['#43AB0D']};#}
            {#config['missed_10camp'] = {'title':'No of missed children', 'color':['#C99900']};#}
            {#config['missed_type_10camp'] = {'title':'No of missed by reason', 'color':['#FFFF00', '#C99900', '#FF0000']};#}
            {#config['absent_3camp'] = {'title':'No of absent children', 'color':['#FFFF00', '#43AB0D']};#}
            {#config['nss_3camp'] = {'title':'No of NSS children', 'color':['#C99900', '#43AB0D']};#}
            {#config['refusal_3camp'] = {'title':'No of refusal children', 'color':['#FF0000', '#43AB0D']};#}


            {#// =============================== Load the charts for the first time ================#}
            {#myPieChartWrapper('chart-vac_child_10camp', '{{ testData|raw }}')#}
            //myHeatMap('{{ testData|raw }}', 'chart-vac_child_10camp');
            //myChartWrapper({type:'column', stacking:'percent'},'chart-vac_child_10camp', '{{ testData|raw }}');
            //colChart('chart-vac_child_10camp', '{{ testData|raw }}', config['vac_child_10camp'].title, config['vac_child_10camp'].color);

            // Prepare random data
            var data = [
//                    {code: 1, pop:6},
//                    {code: 2, pop:3},
//                    {code:3, pop:2.3},
//                    {code:4, pop:1},
//                    {code:5, pop:4},
                [101, 'Kabul'],
                [102, 'Kapisa'],
                [103, 'Logar']

            ];

            $.getJSON('http://localhost/visualizer/web/maps//districts.json', function (geojson) {

                // Initiate the chart
                Highcharts.mapChart('chart-vac_child_10camp', {
                    chart: {
                        map: geojson,
                        mapZoom: 10,
                    },

                    title: {
                        text: 'GeoJSON in Highmaps'
                    },

                    mapNavigation: {
                        enabled: true,
                        buttonOptions: {
                            verticalAlign: 'bottom'
                        }
                    },

                    colorAxis: {
                        min: 1,
                        max: 6,
                        type: 'logarithmic',
                        minColor: '#EEEEFF',
                        maxColor: '#000022',
                        stops: [
                            [0, '#EFEFFF'],
                            [0.67, '#4444FF'],
                            [1, '#000022']
                        ]
                    },

                    xAxis: {
                        minRange: 1
                    },
                    yAxis: {
                        minRange: 1
                    },

                    series: [{
                        allArea: false,
                        animation: {
                            duration: 1000
                        },
                        data: data,
//                        keys:['PROV_CODE', 'value'],
                        joinBy: ['DIST_CODE', 'value'],
                        dataLabels: {
                            enabled: true,
                            color: '#FFFFFF',
                            format: '{point.properties.DIST_NA_EN}'
                        },
                        name: 'Population density',
                        tooltip: {
                            pointFormat: '{point.properties.DIST_NA_EN}:{point.properties.DIST_CODE}'
                        }
                    }]
                });
            });



        });


    </script>
{% endblock %}